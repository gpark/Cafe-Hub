<%= form_for :preference do |p| %>
    <%= p.nested_fields_for :preference_entry do |pe| %>
        <%= pe.select(:preference_type, [['Prefer', 'Prefer'], ['Class', 'Class'], ['R/N Work', 'R/N Work'], ['Obligation', 'Obligation']]) %>
        <%= pe.text_field(:comments, :size => 150) %>
        Comments
        <%= pe.nested_fields_for :entry_occurence do |eo| %>
            <%= eo.check_box :su %>
            <%= eo.check_box :m %>
            <%= eo.check_box :tu %>
            <%= eo.check_box :w %>
            <%= eo.check_box :th %>
            <%= eo.check_box :f %>
            <%= eo.check_box :sa %>
            <%= eo.time_select(:start_time, {:minute_step => 30, :ampm => true}) %>
            <%= eo.time_select(:end_time, {:minute_step => 30, :ampm => true}) %>
            <%= eo.remove_nested_fields_link 'Remove Occurence' %>
        <% end %>
        <%= pe.add_nested_fields_link :entry_occurence, 'Add Occurence' %>
        <%= pe.remove_nested_fields_link 'Remove Entry' %>
    <% end %>
    <%= p.add_nested_fields_link :preference_entry, 'Add Entry' %>
    <%= p.submit %>
<% end %>